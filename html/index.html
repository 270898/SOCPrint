<html>
<head>
<link rel="stylesheet" href="style.css">	
<script type="text/javascript">
function checkServer() 
{
	var xmlhttp = new XMLHttpRequest();
	if (xmlhttp==null)
	{
		document.getElementById("serverStatus").innerHTML = "XMLHttpRequest not supported. Status unknown.";
		return;
	}
        xmlhttp.onreadystatechange = function() 
		{
            if (xmlhttp.readyState == 4) 
			{
                document.getElementById("serverStatus").innerHTML = xmlhttp.responseText;
            }
        }
	xmlhttp.open("GET", "isOnline.php", true);
	xmlhttp.send();
	
    
}
function sendCommand()
{
	var xmlhttp = new XMLHttpRequest();
	if (xmlhttp==null)
	{
		document.getElementById("serverStatus").innerHTML = "XMLHttpRequest not supported. Status unknown.";
		return;
	}
        xmlhttp.onreadystatechange = function() 
		{
            if (xmlhttp.readyState == 4) 
			{
                document.getElementById("serverStatus").innerHTML = xmlhttp.responseText;
            }
        }
	xmlhttp.open("GET", "SendCommand.php", true);
	xmlhttp.send();
}
function checkLogin()
{
	var loginMSG = document.getElementById("loginMSG");
	
	if(document.getElementById("login").innerHTML == "Login")
	{
		if(document.getElementById("username").value == "")
		{
			loginMSG.style.color = "red";
			loginMSG.innerHTML = "Please enter your username";	
			return;
		}
		if(document.getElementById("password").value == "")
		{
			loginMSG.style.color = "red";
			loginMSG.innerHTML = "Please enter your password";			
			return;
		}
		var xmlhttp = new XMLHttpRequest();
		xmlhttp.open("POST", "checklogin.php", true);
		xmlhttp.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
		
		xmlhttp.onreadystatechange = function() 
		{
			if (xmlhttp.readyState == 4) 
			{
				if(xmlhttp.responseText == "OK")
				{
					document.getElementById("login").innerHTML = "Disconnect";
					
					loginMSG.style.color = "lime";
					loginMSG.innerHTML = "Logged in successfully";
				}
				else if(xmlhttp.responseText == "WRONG")
				{
					loginMSG.style.color = "red";
					loginMSG.innerHTML = "Incorrect username or password";
				}
				else if(xmlhttp.responseText == "NO_CONNECTION")
				{
					loginMSG.style.color = "red";
					loginMSG.innerHTML = "Unable to connect to sunfire";
				}
				else
				{
					loginMSG.style.color = "red";
					loginMSG.innerHTML = "Unknown: " + xmlhttp.responseText;
				}
			}
		}
		
		xmlhttp.send("name=" + document.getElementById("username").value + "&password=" + document.getElementById("password").value);
	}
	else
	{
		document.getElementById("login").innerHTML = "Login";
		document.getElementById("username").value = "";
		document.getElementById("password").value = "";
		
		loginMSG.style.color = "lime";
		loginMSG.innerHTML = "Disconnected in successfully";
	}
}
</script>
</head>
<body onload="checkServer()">

	<div class="top" >
	<div class="topText" id="serverStatus">Server status: Checking</div>
	</div>
<div class="content">
<table class="center">
	<tr>
		<td>
		<div id="loginMSG">Not logged in</div>
		<!-- <form action="SendCommand.php" method="post" style> !-->
		<input id="username" class="textbox" type="text" name="name" placeholder="Unix ID e.g. a0123456z"><br>
		<input id="password" class="textbox" type="password" name="password" placeholder="Password"><br>
		
		</td>

		<td>
		<button onclick="checkLogin()" class="loginBtn" type="button" id="login">Login</button>
		</td>
	</tr>
	<br>
	<tr>
		<td>
			<table>
				<tr width="100%" align="center">
				Printer Selection
				</tr>
				<td><input type="radio" name="printer" value="psts">psts</td>
				<td><input type="radio" name="printer" value="psts">pstsb</td>
				<td><input type="radio" name="printer" value="psts">pstsc</td>
			</table>
			File: <input type="file" name="file"><br>
		<!-- <input type="submit"> !-->
		<td>
	</tr>
<td>	
	<p>
	<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>Suggestions: <span id="txtHint"></span></p>
</td>
</table>
</div>
</body>
</html>