function renderPage(num){pageRendering=!0,pdfDoc.getPage(num).then(function(page){var viewport=page.getViewport(1),ratioHeight=max_dimension/viewport.height,ratioWidth=max_dimension/viewport.width;scale=Math.min(ratioHeight,ratioWidth),viewport=page.getViewport(scale),canvas.height=viewport.height,canvas.width=viewport.width;var renderContext={canvasContext:ctx,viewport:viewport},renderTask=page.render(renderContext);renderTask.promise.then(function(){pageRendering=!1,null!==pageNumPending&&(renderPage(pageNumPending),pageNumPending=null)})}),document.getElementById("page_num").textContent=pageNum}function queueRenderPage(num){pageRendering?pageNumPending=num:renderPage(num)}function onPrevPage(){1>=pageNum||(pageNum--,queueRenderPage(pageNum))}function onNextPage(){pageNum>=pdfDoc.numPages||(pageNum++,queueRenderPage(pageNum))}function load(new_url){(null===canvas||null===ctx)&&init(),PDFJS.getDocument(new_url).then(function(pdfDoc_){pdfDoc=pdfDoc_,document.getElementById("page_count").textContent=pdfDoc.numPages,renderPage(pageNum)})}function init(){document.getElementById("next").addEventListener("click",onNextPage),document.getElementById("prev").addEventListener("click",onPrevPage),canvas=document.getElementById("the-canvas"),ctx=canvas.getContext("2d")}var url="/preview/kenlsm_orgin.pdf",pdfDoc=null,pageNum=1,pageRendering=!1,pageNumPending=null,scale=1,canvas=null,ctx=null,max_dimension=332;
